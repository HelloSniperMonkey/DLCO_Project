# Emulator and Assembler

## Author: Soumyajyoti Mohanta  
**ID:** 2301AI23  
**Course:** CS2102 - Department of Computer Science and Engineering, IIT Patna  

## Declaration of Authorship
This project, including all associated files, is part of the assignment for CS2102.

---

## Project Overview
This project consists of two main components:
1. **Emulator:** Executes binary machine code and provides detailed trace output.
2. **Assembler:** Converts assembly code into machine-readable binary files.

---

## Files Included
### Emulator
- `emu.cpp` - The main emulator program.
- `Emulator_Claims.txt` - Authorship declaration and details.

### Assembler
- `asm.cpp` - The main assembler program.
- `Assembler_Claims.txt` - Authorship declaration and details.

### Test Files
- Various test assembly files and their expected outputs (e.g., test1 to test6, bubblesort).
- The `.o` files generated by the assembler.

---

## Compilation Instructions
### Emulator
#### Windows:
```sh
 g++ emu.cpp -o emu
 emu <insert_file_name>.o <trace_file_name>.txt
```
#### Ubuntu & macOS:
```sh
 g++ emu.cpp -o emu
 ./emu <insert_file_name>.o <trace_file_name>.txt
```
**Note:** Ensure the `.o` input files are in the same directory as the executable.

### Assembler
#### Windows:
```sh
 g++ asm.cpp -o asm
 asm <insert_file_name>.asm <listing_file_name>.l <binary_file_name>.o <logfile_name>.log
```
#### Ubuntu & macOS:
```sh
 g++ asm.cpp -o asm
 ./asm <insert_file_name>.asm <listing_file_name>.l <binary_file_name>.o <logfile_name>.log
```
**Note:** The assembler generates `.o` and `.l` files if no errors occur.

---

## Emulator Functionalities
- **Full Program Trace:** Outputs execution details to `trace.txt`.
- **Instruction Completion Count:** Displays the total number of executed instructions.
- **Memory Dump:** Shows memory contents after execution.
- **Register States:** Displays the final values of all registers.
- **Error Handling:** Detects invalid opcodes and segmentation faults.

---

## Assembler Functionalities
- **Two-Pass Assembler:** Processes the assembly code in two stages.
- **Error Handling:** Identifies unknown instructions, duplicate labels, and missing labels.
- **Warning System:** Flags unused labels.
- **Listing File (`.l`):** Provides instruction mnemonics and memory bytes.
- **Machine Code File (`.o`):** Generates executable binary files.
- **Advanced Syntax Support:** Supports decimal, octal, and hexadecimal values.
- **Comment and Empty Line Handling:** Skips unnecessary lines in the assembly code.

---

## Testing (macOS)
### Emulator
- All `.o` files were tested and executed successfully.

### Assembler
- Tested with **7 examples**:
  - 4 test cases from documentation.
  - 2 custom test files.
  - `bubblesort` implementation.
- Errors detected only in `test2.asm`, stopping execution in the second pass and logging errors.
- Other test files assembled correctly, producing `.l` and `.o` files.

---

## Footnotes
- Ensure input files (`.asm` or `.o`) are in the execution directory.
- The emulator requires properly formatted `.o` files to function correctly.
- The assembler generates error messages on the terminal and logs them in a `.log` file.

---

## Conclusion
This project implements a functional assembler and emulator, supporting a variety of assembly instructions, error handling, and debugging features. The testing confirms accurate operation on various sample files.

